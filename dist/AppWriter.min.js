!function(r,n){"function"==typeof define&&define.amd?define(["axios"],function(e){return r.jsT9=n(e)}):"object"==typeof exports?module.exports=n(require("axios")):r.jsT9=n(r.axios)}(this,function(r){"use strict";var n=function(r,n){this.config={sort:function(r,n){return r.length<n.length?-1:r.length>n.length?1:n>=r?-1:1},maxAmount:1/0,caseSentitive:!0,slackSearch:!0},function(r,n){for(var e in n)r[e]=n[e];return r}(this.config,n),this.root={branches:[]},this._onReadyCallbacks=[],this._getWordList(r,function(r){for(var n in r)this.addWord(r[n]);this._isReady=!0,setTimeout(function(){for(var r in this._onReadyCallbacks)this._onReadyCallbacks[r].call(null)}.bind(this),0)}.bind(this))};return n.prototype={constructor:n,ready:function(r){return this._isReady?r.call(null):this._onReadyCallbacks.push(r)},predict:function(r,n){if(!r)return[];n=n||this.config.maxAmount;var e=!1,t=this._findInitialBranch(r);if(!t)return[];t.currentBranch.$===!0&&(e=t.baseWord);var s=this._exploreBranch(t.baseWord,t.currentBranch);return e&&s.push(e),s.sort(this.config.sort),s.slice(0,n)},_findInitialBranch:function(r){var n=this.root;return this.config.slackSearch?this._slackSearch(r,n):this._normalSearch(r,n)},_normalSearch:function(r,n){for(var e,t,s,a="";r.length;){s=!1;for(t in n.branches)if(e=n.branches[t].prefix,r.length<e.length){if(0===e.indexOf(r))return a+=e,{currentBranch:n.branches[t],baseWord:a}}else if(0===r.indexOf(e)){a+=e,r=r.substring(e.length),n=n.branches[t],s=!0;break}if(!s)return!1}return{currentBranch:n,baseWord:a}},_slackSearch:function(r,n){for(var e,t,s,a,i="";r.length;){for(s=!1,a=0;a<r.length&&!s;a++){e=r.substring(0,r.length-a);for(t in n.branches)if(0===n.branches[t].prefix.indexOf(e)){i+=n.branches[t].prefix,r=n.branches[t].prefix===e?r.substring(r.length-a):"",n=n.branches[t],s=!0;break}}if(!s)return!1}return{currentBranch:n,baseWord:i}},addWord:function(r){for(var n=this.root,e=!1;!e;){var t,s=!1,a=!1;for(var i in n.branches){if(this._tryCase1(n,r,i))return;if(t=this._tryCase2(n,r,i)){r=t.word,n=t.branch,s=!0;break}if(this._tryCase3(n,r,i)){a=e=s=!0;break}}this._tryCase4(n,r,s)&&(e=!0)}},_tryCase1:function(r,n,e){return r.branches[e].prefix===n?(r.branches[e].$=!0,!0):!1},_tryCase2:function(r,n,e){return 0===n.indexOf(r.branches[e].prefix)?(n=n.substring(r.branches[e].prefix.length),r=r.branches[e],{branch:r,word:n}):!1},_tryCase3:function(r,n,e){for(var t,s=0;s<=n.length-1;s++){var a=n.substring(0,n.length-s),i=n.substring(n.length-s);if(0===r.branches[e].prefix.indexOf(a)){t={prefix:a,branches:[],$:0===i.length};var h={prefix:r.branches[e].prefix.substring(a.length),branches:r.branches[e].branches,$:r.branches[e].$};if(r.branches[e]=t,r.branches[e].branches.push(h),i.length>0){var c={prefix:i,branches:[],$:!0};r.branches[e].branches.push(c)}return!0}}},_tryCase4:function(r,n,e){var t;return e?!1:(t={prefix:n,branches:[],$:!0},r.branches.push(t),!0)},_exploreBranch:function(r,n){var e=[];for(var t in n.branches){var s=n.branches[t].prefix;n.branches[t].$===!0&&e.push(r+s);var a=this._exploreBranch(r+s,n.branches[t]);e=e.concat(a)}return e},_getWordList:function(r,n){Array.isArray(r)?n(r):"string"==typeof r?this._fetchWordList(r,n):(console.error(typeof r+" variable is not supported as data source"),n([]))},_fetchWordList:function(n,e){var t=[];r.get(n).then(function(r){var n=r.data;"text"===r.responseType&&(n=JSON.parse(n)),Array.isArray(n.words)&&(t=n.words),e(t)}.bind(this))["catch"](function(r){e(t)}.bind(this))}},n});